<div class="container py-4">
  <div class="d-flex align-items-center mb-3">
    <!-- Back button -->
    <button type="button"
      class="btn btn-outline-secondary rounded-circle d-flex align-items-center justify-content-center me-3"
      style="width:36px;height:36px;" (click)="onBack()">
      <i class="bi bi-arrow-left"></i>
    </button>

    <!-- Title + subtitle -->
    <div class="flex-grow-1 text-center">
      <div class="d-flex justify-content-center align-items-center mb-1">
        <i class="bi bi-compass me-2"></i>
        <h2 class="fw-bold mb-0">Discover</h2>
      </div>
      <div class="text-muted small">
        Step into a new zone, join a new conversation.
      </div>
    </div>
  </div>
  <div class="row mb-3 justify-content-center">
    <div class="col-md-8 col-lg-6 mb-2 mb-md-0">
      <input class="form-control" placeholder="Search authors..." [(ngModel)]="authorSearch"
        (ngModelChange)="searchAuthors()" />
    </div>
    <div class="col-md-4 col-lg-3">
      <select class="form-select" [(ngModel)]="selectedType" (ngModelChange)="searchAuthors()">
        <option value="Articles">Articles</option>
        <option value="Authors">Authors</option>
      </select>
    </div>
  </div>

  <div class="mb-3 text-center">
    <span class="badge bg-light text-dark mx-1" *ngFor="let tag of trendingTags()">
      {{ tag }}
    </span>
  </div>

  <h4 class="fw-semibold mt-4 mb-2">Readers' choice</h4>

  <div class="row mb-4 g-3 align-items-center">
    <!-- Left arrow -->
    <div class="col-auto" *ngIf="readersPaginated().length">
      <button type="button" class="btn btn-outline-secondary btn-sm rounded-circle" (click)="slidePrev()"
        [disabled]="!canSlidePrev()">
        <i class="bi bi-chevron-left"></i>
      </button>
    </div>

    <!-- Cards window -->
    <div class="col">
      <div class="row g-3">
        <ng-container *ngIf="readersPaginated().length; else noArticles">
          <div class="col-sm-6 col-md-3 d-flex" *ngFor="let article of readersPaginated()">
            <div class="card shadow-sm h-100 w-100">
              <img [src]="article.thumbnail" class="card-img-top" style="height:140px;object-fit:cover;"
                alt="Article thumbnail">

              <div class="card-body d-flex flex-column">
                <h6 class="fw-semibold mb-1 text-truncate">
                  {{ article.title }}
                </h6>
                <p class="small text-muted mb-0 flex-grow-1">
                  {{ article.summary }}
                </p>
              </div>
            </div>
          </div>
        </ng-container>

        <ng-template #noArticles>
          <div class="col-12 text-center text-muted py-3">
            No articles found matching your search.
          </div>
        </ng-template>
      </div>
    </div>

    <!-- Right arrow -->
    <div class="col-auto" *ngIf="readersPaginated().length">
      <button type="button" class="btn btn-outline-secondary btn-sm rounded-circle" (click)="slideNext()"
        [disabled]="!canSlideNext()">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </div>


  <!-- Rising authors -->
  <h4 class="fw-semibold mb-2">Rising authors</h4>
  <div class="row mb-4 g-3 align-items-stretch">
    <!-- Social Connect Card -->
    <div class="col-sm-6 col-md-3 d-flex">
      <div class="card h-100 w-100 px-3 py-4 d-flex flex-column justify-content-center">
        <div class="d-flex justify-content-between align-items-start mb-2">
          <span class="fw-semibold">Connect to your social media.</span>
          <button type="button" class="btn-close btn-sm" aria-label="Close"></button>
        </div>
        <small class="text-muted mb-3">
          Discover Quill writers you already follow on social media.
        </small>
        <div>
          <button class="btn btn-light btn-circle me-2">
            <i class="bi bi-google"></i>
          </button>
          <button class="btn btn-light btn-circle me-2">
            <i class="bi bi-github"></i>
          </button>
          <button class="btn btn-light btn-circle">
            <i class="bi bi-twitter"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Author Cards -->
    <ng-container *ngIf="filteredAuthors().length; else noAuthors">
      <div class="col-sm-6 col-md-3 d-flex" *ngFor="let author of filteredAuthors()">
        <div class="card h-100 w-100 shadow-sm">
          <div class="card-header bg-transparent border-0 pb-1">
            <span class="badge bg-light text-dark">
              {{ author.tags[0] | uppercase }}
            </span>
          </div>
          <div class="card-body text-center pt-2 d-flex flex-column">
            <img [src]="author.avatar || 'https://via.placeholder.com/64x64.png?text=Avatar'"
              class="rounded-circle mb-2 mx-auto" width="64" height="64" style="object-fit:cover;"
              alt="Author avatar" />
            <div class="fw-semibold mb-1">{{ author.name }}</div>
            <small class="text-muted d-block mb-1">
              {{ author.followers }} views
            </small>
            <div class="small text-muted mb-3 flex-grow-1">
              {{ author.bio }}
            </div>
            <button class="btn btn-dark w-75 mx-auto mt-auto">
              Visit <span aria-label="arrow">â†’</span>
            </button>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-template #noAuthors>
      <div class="col-12 text-center text-muted py-3">
        No authors found matching your search.
      </div>
    </ng-template>
  </div>
</div>